(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{546:function(e,t,a){e.exports=a(900)},551:function(e,t,a){},817:function(e,t){},819:function(e,t){},853:function(e,t){},854:function(e,t){},900:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(85),l=a.n(o),c=(a(551),a(552),a(70)),i=a(136),s=a(38),u=a(39),m=a(41),d=a(40),p=a(42),h=a(20),f=a.n(h),g=a(67),E=a(264),v=a(426),y=a(62),b=a(71),x=a.n(b),w=a(252),C=a(36),O=a(390),k=a(134),M=a(353),T={root:"http://localhost:3333/api",send:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";"string"===typeof e&&(t=e);var a={method:t,credentials:"include",headers:{"Content-Type":"application/json"}};return"get"!==t.toLowerCase()&&(a.body=JSON.stringify(e)),a},currentUser:{method:"GET",endpoint:"/v1/user/me"},login:"/login",logout:{endpoint:"/logout",method:"GET"},register:"/signup",monthlyTransactions:function(e,t,a){var n=a,r=t;return t.length<=2&&(r=(new Date).getFullYear().toString(),n=t),"/v1/transaction/".concat(e,"/monthly/").concat(r,"/").concat(n)},transactionRange:function(e,t){return"/v1/transaction/".concat(e,"/range?days=").concat(t)},allTransactions:{method:"GET",endpoint:"/v1/transaction"},yearToDate:{method:"GET",endpoint:"/v1/transaction/ytd"},yearToDateData:{method:"GET",endpoint:"/v1/transaction/ytd/data"},updateBudget:{method:"POST",endpoint:"/v1/budget/save"},prestoUsage:"/v1/presto/usage",prestoLogin:{endpoint:"/v1/presto/login",method:"POST"},prestoCheckLogin:{endpoint:"/v1/presto/check-login",method:"GET"}},j=a(108);var F=function(e){var t=e.cards,a=e.handleChange,n=e.currentSelection,o=function(e){var t=e.map(function(t,a){return{key:e.length>1?a+2:a+1,text:t,value:t}});return e.length>1&&t.unshift({key:1,text:"All Cards",value:"all"}),t}(t);return r.a.createElement(j.a,{item:!0,options:o,value:n,onChange:function(e,t){var n=t.value;a(n)}})},P="range",N=[{name:"last 30 days",value:30},{name:"last 60 days",value:60},{name:"last year",value:365}],S=(new Date).getMonth(),I=(new Date).getFullYear(),Y=function(e){function t(){var e,a,n;Object(s.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).cardsArray=n.props.cards&&n.props.cards.map(function(e){return e.cardNumber}),n.state={activeSelection:N[0].name,activeSelectionValue:N[0].value,yearOrRange:"",monthOrUnit:"",searchType:"",cardNumber:"",modalOpen:!1,selectedMonth:S,selectedYear:I,url:""},n.optionsMap=(a={},Object(y.a)(a,N[0].name,N[0].value),Object(y.a)(a,N[1].name,N[1].value),Object(y.a)(a,N[2].name,N[2].value),a),n.handleItemClick=function(e){var t=n.state.cardNumber,a=n.props.history,r=e.target.textContent.toLowerCase();console.log("itemclick:",r);var o=n.optionsMap[r],l=P,c="/dashboard/".concat(t,"/").concat(l,"/").concat(o,"/").concat("days");a.push(c)},n.handleCalChange=function(e,t){var a=t.name,r=t.value;n.setState(Object(y.a)({},a,r))},n.FilterMenu=function(){var e=n.state.yearOrRange;return N.map(function(t){return r.a.createElement(w.a.Item,{key:t.name,name:t.name,active:e===t.value,onClick:n.handleItemClick})})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.cardNumber,n=t.yearOrRange,o=t.searchType,l=t.monthOrUnit,c=t.modalOpen,i=t.selectedYear,s=t.selectedMonth,u=t.url,m=t.activeSelection,d=this.props,p=d.children,h=d.match,g=d.history;return console.log("datafilter:",h),r.a.createElement(x.a,{url:u,options:T.send("GET")},function(t){var u=t.data,d=t.error,h=t.loading;return console.log({data:u,error:d,loading:h}),r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{size:"large",pointing:!0,secondary:!0},!h&&!d&&r.a.createElement(w.a.Item,{header:!0},0===u.data.transactions.length?"No Transactions For This Period":"".concat(f()(u.data.transactions[0].date).format("MMMM DD YYYY")," - ").concat(f()(u.data.transactions[u.data.transactions.length-1].date).format("MMMM DD YYYY"))),h&&r.a.createElement(w.a.Item,{header:!0},"Loading..."),r.a.createElement(w.a.Menu,{position:"right"},r.a.createElement(F,{cards:e.cardsArray,currentSelection:a,handleChange:function(e){var t="/dashboard/".concat(e,"/").concat(o,"/").concat(n,"/").concat(l);g.push(t)}}),r.a.createElement(e.FilterMenu,null),r.a.createElement(w.a.Item,{name:"month",active:"month"===o,onClick:function(){e.setState({activeSelection:"month",modalOpen:!0})}},r.a.createElement(C.a,{name:"calendar"})))),p({data:u,error:d,loading:h}),r.a.createElement(O.a,{size:"tiny",open:c,onClose:e.close},r.a.createElement(O.a.Header,null,"Choose Another Date"),r.a.createElement(O.a.Content,null,r.a.createElement(M.MonthInput,{inline:!0,closable:!0,dateFormat:"M",name:"selectedMonth",maxDate:i==I?S+1:12,value:s||S+1,onChange:e.handleCalChange}),r.a.createElement(M.YearInput,{inline:!0,name:"selectedYear",closable:!0,dateFormat:"YYYY",maxDate:I,minDate:2018,value:i||I,onChange:e.handleCalChange})),r.a.createElement(O.a.Actions,null,r.a.createElement(k.a,{negative:!0,content:"No",onclick:function(){return e.setState({modalOpen:!1})}},"No"),r.a.createElement(k.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Yes",onClick:function(){var t="/dashboard/".concat(a,"/").concat(m,"/").concat(i,"/").concat(s);e.setState({modalOpen:!1}),g.push(t)}}))))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.cardNumber,n=e.yearOrRange,r=e.monthOrUnit,o=e.searchType;if(console.log("getderivedstatefromprops:",a,n,r,o),"err"===o)return null;if(o===P&&parseInt(n,10)>500||o===P&&parseInt(n,10)<5)return null;if("month"===o){if(parseInt(n,10)>I||parseInt(n,10)===I&&parseInt(r,10)>S+1)return null;if(parseInt(n,10)<2010||parseInt(n,10)<2010&&parseInt(r,10)<5)return null;if(parseInt(r)>12||parseInt(r)<1)return null}return console.log("PASSED VALIDATION:",a,n,r,o),a===t.cardNumber&&n===t.yearOrRange&&r===t.monthOrUnit&&o===t.searchType?null:{cardNumber:a,yearOrRange:n,monthOrUnit:r,searchType:o,url:"month"===o?"".concat(T.root).concat(T.monthlyTransactions(a,n,r)):"".concat(T.root).concat(T.transactionRange(a,n))}}}]),t}(r.a.Component);Y.defaultProps={};var D=Y,A=a(271),L=function(e){var t=e.label,a=e.value,n=e.extra,o=e.extraIcon,l=e.iconName,c=e.iconColor,i=e.isCustomIcon,s=e.extraFooter,u=e.extraFooterIcon;return r.a.createElement(A.a,{style:{flex:"1",minWidth:"230px",maxWidth:"250px",borderRadius:"6px",zIndex:"0"}},r.a.createElement(A.a.Content,{style:{paddingLeft:"20px",paddingRight:"20px"}},r.a.createElement(A.a.Description,null,r.a.createElement(E.a,{columns:1,verticalAlign:"middle"},r.a.createElement(E.a.Row,{verticalAlign:"center",columns:2},r.a.createElement(E.a.Column,{style:{textAlign:"left",paddingLeft:"1rem",paddingRight:"0"}},i?r.a.createElement("i",{style:{color:c,fontSize:"4rem",minHeight:"64px"},className:l}):r.a.createElement(C.a,{className:l,size:"huge",color:c})),r.a.createElement(E.a.Column,{style:{textAlign:"right",lineHeight:"1.2",paddingRight:"1rem",paddingLeft:"0"}},r.a.createElement(E.a.Row,null,r.a.createElement("div",{style:{fontSize:"1rem",fontWeight:"300"}},t)),r.a.createElement(E.a.Row,null,r.a.createElement("div",{style:{fontWeight:"600",fontSize:"2rem"}},a))))))),r.a.createElement(A.a.Content,{extra:!0,style:{margin:"0 15px",paddingLeft:"0",fontWeight:"200",fontSize:"0.8rem"}},o&&r.a.createElement("i",{className:o})," ",n,s&&r.a.createElement("div",null,u&&r.a.createElement("i",{className:u})," ",s)))};function B(e){var t=e.data,a=e.loading,n=e.error,o=0,l=0,c=0,i=0,s=0,u=0,m=0,d=0,p=Date.now(),h=(Date.now(),0),g=0,E=0,v=0,y=!1;return a||n||(o=t.data.totalAmount,l=t.data.prevInterval.totalAmount,c=t.data.count.transfers+t.data.count.fares,i=t.data.prevInterval.count.transfers+t.data.prevInterval.count.fares,s=t.data.count.fares,u=t.data.prevInterval.count.fares,m=t.data.count.transfers,d=t.data.prevInterval.count.transfers,p=t.data.prevInterval.transactions.length?f()(t.data.prevInterval.transactions[t.data.prevInterval.transactions.length-1].date).utcOffset(0).format("DD MMM YY"):null,t.data.prevInterval.transactions.length?f()(t.data.prevInterval.transactions[0].date).utcOffset(0).format("MM/DD/YYYY"):null,console.log(t.data.prevInterval.transactions.length-1)),a||n||!t.data.lastYear||(y=!0,h=t.data.lastYear.totalAmount,g=(E=t.data.lastYear.count.fares)+(v=t.data.lastYear.count.transfers)),r.a.createElement(A.a.Group,{centered:!0},!a&&!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{label:"Spent",value:"$".concat((o/100).toFixed(2)),extra:"$".concat(Math.abs((o-l)/100).toFixed(2)," ").concat(p?"from period ending ".concat(p):""),extraIcon:o-l>0?"ti-arrow-up":"ti-arrow-down",iconName:"ti-credit-card",isCustomIcon:!0,extraFooter:y?"$".concat(Math.abs((o-h)/100).toFixed(2)," from last year"):null,extraFooterIcon:y?o-h>0?"ti-arrow-up":"ti-arrow-down":null}),r.a.createElement(L,{label:"Taps",value:c,extra:"".concat(Math.abs(c-i)," ").concat(p?"from period ending ".concat(p):""),extraIcon:c-i>0?"ti-arrow-up":"ti-arrow-down",iconName:"ti-hand-drag",isCustomIcon:!0,extraFooter:y?"".concat(Math.abs(c-g)," from last year"):null,extraFooterIcon:y?c-g>0?"ti-arrow-up":"ti-arrow-down":null}),r.a.createElement(L,{label:"Fares",value:s,extra:"".concat(Math.abs(s-u)," ").concat(p?"from period ending ".concat(p):""),extraIcon:s-u>0?"ti-arrow-up":"ti-arrow-down",iconName:"ti-ticket",isCustomIcon:!0,extraFooter:y?"".concat(Math.abs(s-E)," from last year"):null,extraFooterIcon:y?s-E>0?"ti-arrow-up":"ti-arrow-down":null}),r.a.createElement(L,{label:"Transfers",value:m,extra:"".concat(Math.abs(m-d)," ").concat(p?"from period ending ".concat(p):""),extraIcon:m-d>0?"ti-arrow-up":"ti-arrow-down",iconName:"ti-vector",isCustomIcon:!0,extraFooter:y?"".concat(Math.abs(m-v)," from last year"):null,extraFooterIcon:y?m-v>0?"ti-arrow-up":"ti-arrow-down":null})))}B.defaultProps={};var R=B,z=a(196),W=a(418),U=a(32),K=a(422),G=a(33),H=a(21);function q(){var e=Object(U.a)(["\n  font-size: 0.8rem;\n  list-style: none;\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n"]);return q=function(){return e},e}function $(){var e=Object(U.a)(["\n  background: ",";\n  max-height: 10px;\n  max-width: 10px;\n  min-height: 10px;\n  min-width: 10px;\n  margin-right: 15px;\n  border-radius: 100%;\n"]);return $=function(){return e},e}function J(){var e=Object(U.a)(["\n  display: block;\n  text-decoration: none;\n  list-style: none;\n  list-style-type: none;\n  list-style-position: outside;\n  margin: 0;\n  padding: 0;\n"]);return J=function(){return e},e}function V(){var e=Object(U.a)(["\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 5px;\n\n  p {\n    font-weight: bold;\n  }\n\n  .count {\n    text-align: right;\n    padding: 0;\n    margin: 0;\n\n    .breakdown {\n      padding: 0;\n      margin: 0;\n      margin-top: -5px;\n      margin-bottom: -8px;\n      font-size: 0.7rem;\n    }\n  }\n\n  &.trip-count {\n    align-items: flex-start;\n  }\n"]);return V=function(){return e},e}function X(){var e=Object(U.a)(["\n  position: relative;\n  background: rgba(40, 42, 48, 0.7);\n  color: lightgrey;\n  border: 1px solid lightgrey;\n  border-radius: 0.25rem;\n  min-width: 400px;\n  padding: 30px 50px 40px 50px;\n  box-shadow: 0px 1px 2px 0 rgba(34, 36, 38, 0.15);\n  z-index: 1000;\n\n  header {\n    background: rgba(40, 42, 48, 0.8);\n    bottom: 0;\n    left: 0;\n    margin: 0;\n    padding: 0;\n    position: absolute;\n    width: 100%;\n    border-radius: 0 0 0.25rem 0.25rem;\n\n    h2 {\n      font-size: 1.1rem;\n      text-align: center;\n      font-weight: bold;\n      padding: 10px 5px;\n    }\n  }\n\n  footer {\n    margin: 20px 0;\n  }\n\n  h3 {\n    font-size: 1rem;\n    font-weight: bold;\n    padding: 0;\n    margin: 0;\n    margin-bottom: 5px;\n    margin-top: 15px;\n  }\n"]);return X=function(){return e},e}var _=G.a.div(X()),Q=G.a.div(V()),Z=G.a.ul(J()),ee=G.a.div($(),function(e){return e.color}),te=G.a.li(q()),ae=function(e){var t=e.x,a=e.y,n=(e.stroke,e.payload);return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},n.value))},ne=function(e){var t=e.payload;e.label;if(e.active){var a=t[0],n=t[1];return r.a.createElement(_,null,r.a.createElement("header",null,r.a.createElement("h2",null,"".concat(a.payload.dayOfWeek,", ").concat(a.payload.month," ").concat(a.payload.date,", ").concat(a.payload.year))),r.a.createElement(Q,{className:"trip-count"},r.a.createElement(Q,null,r.a.createElement(ee,{color:a.color}),r.a.createElement("p",null,"Taps")),r.a.createElement("div",{className:"count"},r.a.createElement("div",null,a.payload.trips),r.a.createElement("div",{className:"breakdown"},"".concat(a.payload.trips>0?"".concat(a.payload.fares.count," Fare").concat(1===a.payload.fares.count?"":"s"," | ").concat(a.payload.transfers.count," Transfer").concat(1===a.payload.transfers.count?"":"s"):"")))),r.a.createElement(Q,null,r.a.createElement(Q,null,r.a.createElement(ee,{color:n.color}),r.a.createElement("p",null,"Spent")),r.a.createElement("div",null,"$",a.payload.amount)),r.a.createElement("footer",null,a.payload.fares.locations.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"header"},"Fares"),r.a.createElement(Z,null,a.payload.fares.locations.map(function(e){return r.a.createElement(Q,null,r.a.createElement(te,null,e.location),r.a.createElement(te,null,f()(e.time).utcOffset(0).format("hh:mm A")))}))),a.payload.transfers.locations.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"header"},"Transfers"),r.a.createElement(Z,null,a.payload.transfers.locations.map(function(e){return r.a.createElement(Q,null,r.a.createElement(te,null,e.location),r.a.createElement(te,null,f()(e.time).utcOffset(0).format("hh:mm A")))})))))}return null},re=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length){var a=f()();return{date:a.format("DD"),dayOfWeek:a.format("dddd"),amount:"0.00",trips:0}}var n=[0,0],r=function(e,t){for(var a={},n=f()(e),r=f()(t);n<=r;)a[n.format("DD/MM/YYYY")]={amount:0,trips:0,transfers:0,fares:0,transferLocations:[],fareLocations:[]},n=n.add(1,"days");return a}(f()(e[0].date).utcOffset(0).format("YYYY-MM-DD"),f()(e[e.length-1].date).utcOffset(0).format("YYYY-MM-DD"));return e.forEach(function(e){var t=f()(e.date).utcOffset(0).format("DD/MM/YYYY"),a=parseFloat(e.amount);"Transfer"===e.type&&r[t].transferLocations.push({location:e.location,time:e.date}),"Fare Payment"!==e.type&&"Transit Pass Payment"!==e.type||r[t].fareLocations.push({location:e.location,time:e.date}),r[t].amount+=a,r[t].trips+=1,r[t].transfers+="Transfer"===e.type?1:0,r[t].fares+="Fare Payment"===e.type||"Transit Pass Payment"===e.type?1:0}),{dataset:Object.keys(r).map(function(e){var a=f()(e,"DD/MM/YYYY");return t&&(n[1]=n[1]<r[e].amount?(r[e].amount/100).toFixed(2):n[1]),n[1]=n[1]<r[e].trips?r[e].trips:n[1],{label:"".concat(a.format("MMM")," ").concat(a.format("DD")),date:a.format("DD"),dayOfWeek:a.format("dddd"),month:a.format("MMMM"),year:a.format("YYYY"),amount:(r[e].amount/100).toFixed(2),trips:r[e].trips,transfers:{count:r[e].transfers,locations:r[e].transferLocations},fares:{count:r[e].fares,locations:r[e].fareLocations}}}),domain:n}}(e.data.transactions,!0);return t.dataset?r.a.createElement("div",null,r.a.createElement(H.k,{height:300,style:{background:"#444"}},r.a.createElement(H.g,{margin:{top:20,right:30,left:0,bottom:0},data:t.dataset},r.a.createElement(H.c,{vertical:!1,stroke:"#EBEBEB"}),r.a.createElement(H.f,{dataKey:"trips",type:"monotone",stroke:"#3333cc",strokeWidth:2,dot:{r:0}}),r.a.createElement(H.f,{dataKey:"amount",type:"monotone",stroke:"#3BB4E9",strokeWidth:2,dot:{r:0}}),r.a.createElement(H.n,{allowDecimals:!1,type:"number",domain:t.domain,padding:{left:50},dataKey:"amount",tickLine:!1,axisLine:!1,stroke:"#C4C4C4"}),r.a.createElement(H.m,{dataKey:"label",tickLine:!1,axisLine:!1,tickSize:0,minTickGap:0,height:60,interval:t.dataset.length>100?10:1,tick:r.a.createElement(ae,null),stroke:"#C4C4C4"}),r.a.createElement(H.l,{wrapperStyle:{zIndex:"1000"},content:r.a.createElement(ne,null)}),r.a.createElement(H.e,{iconType:"circle"})))):r.a.createElement(z.a,{placeholder:!0},r.a.createElement(K.a,{icon:!0},r.a.createElement(C.a,{name:"calendar times outline"}),"No transactions for this period."))};a(810);function oe(e){var t,a=e.year,n=e.month,o=e.data,l=e.error,c=e.loading;return console.log("MonthlyOverview:",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{style:{minHeight:"250px",padding:0,boxShadow:"none",border:"none"},loading:c},!c&&!l&&r.a.createElement(re,{month:(t=n,["January","February","March","April","May","June","July","August","September","October","November","December"][t]),year:a,data:o.data}),!c&&l&&r.a.createElement(W.a,{error:!0},l.message)))}var le=a(97);function ce(){var e=Object(U.a)(['\n  position: relative;\n  border: 1px solid lightgrey;\n  width: 335px;\n  border-radius: 0.25rem;\n  padding: 10px;\n  margin-left: 15px;\n\n  &:hover {\n    box-shadow: 0px 1px 2px 0 rgba(34, 36, 38, 0.15);\n  }\n\n  &::before {\n    position: absolute;\n    content: "";\n\n    background: #fff;\n    top: 5px;\n    left: -1px;\n    width: 10px;\n    height: 10px;\n    border-left: 1px solid lightgrey;\n    border-bottom: 1px solid lightgrey;\n\n    transform: translateX(-50%) rotate(45deg);\n  }\n']);return ce=function(){return e},e}function ie(){var e=Object(U.a)(["\n  /* position: absolute;\n  top: 0;\n  left: 100px; */\n"]);return ie=function(){return e},e}function se(){var e=Object(U.a)(["\n  border-top: 1px solid lightgrey;\n  margin-top: 8px;\n  padding-top: 5px;\n  font-weight: bold;\n"]);return se=function(){return e},e}function ue(){var e=Object(U.a)(["\n  margin-left: 120px;\n"]);return ue=function(){return e},e}function me(){var e=Object(U.a)(["\n  position: absolute;\n  left: ",";\n  font-weight: 900;\n  top: -2px;\n  color: ",";\n"]);return me=function(){return e},e}function de(){var e=Object(U.a)(["\n  list-style: none;\n  margin: 0;\n  margin-top: 15px;\n  margin-bottom: 40px;\n  list-style: none;\n  position: relative;\n  padding: 1px 100px;\n  color: #000;\n  font-size: 13px;\n"]);return de=function(){return e},e}function pe(){var e=Object(U.a)(["\n  display: flex;\n  flex-flow: row nowrap;\n\n  position: relative;\n  margin-left: 10px;\n  padding: 0 0 10px 10px;\n"]);return pe=function(){return e},e}function he(){var e=Object(U.a)(['\n  &::before {\n    content: "";\n    width: 1px;\n    height: 100%;\n    position: absolute;\n    border-left: 3px solid ',";\n  }\n"]);return he=function(){return e},e}function fe(){var e=Object(U.a)(['\n  position: relative;\n\n  span.dot {\n    &::after {\n      content: "";\n      background: #fff;\n      width: 13px;\n      height: 13px;\n      border-radius: 50%;\n      border: 3px solid ',";\n      position: absolute;\n      top: 0;\n      left: -5px;\n    }\n  }\n\n  &:last-of-type {\n    section::before {\n      border-left: none;\n    }\n  }\n"]);return fe=function(){return e},e}var ge=G.a.li(fe(),function(e){return e.color||"blue"}),Ee=G.a.section(he(),function(e){return e.color||"blue"}),ve=G.a.div(pe()),ye=G.a.ul(de()),be=G.a.div(me(),function(e){return!0===e.AM?"-70px":"-69px"},function(e){return e.color}),xe=G.a.div(ue()),we=G.a.div(se()),Ce=G.a.div(ie()),Oe=G.a.div(ce());function ke(e){var t=e.data,a=e.loading,n=e.error,o=[];a||n||(o=function(e){var t={};return e.forEach(function(e){var a=f()(e.date).format("MM-DD-YYYY");t[a]?t[a].push(e):t[a]=[e]}),t}(t.data.transactions)),console.log(o);return r.a.createElement(z.a,{vertical:!0},!a&&!n&&Object.keys(o).sort(function(e,t){return e<t?1:-1}).map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,null,r.a.createElement(le.a,null,f()(e).utcOffset(0).format("D MMM YYYY"))),r.a.createElement(ye,null,o[e].map(function(e){return r.a.createElement(ge,{color:"Transfer"===e.type?"orange":"blue"},r.a.createElement(Ee,{color:"Transfer"===e.type?"orange":"blue"},r.a.createElement("span",{className:"dot"}),r.a.createElement(be,{AM:"AM"===f()(e.date).utcOffset(0).format("A"),color:"Transfer"===e.type?"orange":"blue"},f()(e.date).utcOffset(0).format("hh:mm A")),r.a.createElement(ve,null,r.a.createElement("div",null,r.a.createElement(le.a,{color:"Transfer"===e.type?"orange":"blue"},"Transfer"===e.type?"Transfer".toUpperCase():"Fare Paid".toUpperCase())),r.a.createElement(Ce,null,r.a.createElement(Oe,null,r.a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(le.a,{color:"green"},e.cardNumber),r.a.createElement("div",null,"Transfer"===e.type?"":"$".concat((Math.round(100*e.amount)/1e4).toFixed(2)))),r.a.createElement(we,null,"".concat(e.location)))))))})))}))}ke.defaultProps={};function Me(){var e=Object(U.a)(["\n  height: 100%;\n  padding: 20px;\n"]);return Me=function(){return e},e}G.a.nav(Me());var Te=a(419);function je(e){var t=e.data,a=e.loading,n=e.error,o=[];if(a)return r.a.createElement("div",null,"Loading...");a||n||!t.data||(o=t.data.transactions.slice(0).sort(function(e,t){return Date.parse(e.date)>Date.parse(t.date)?-1:1}).map(function(e,t){return r.a.createElement(Te.a.Row,{positive:"Transfer"===e.type,key:e.id},r.a.createElement(Te.a.Cell,null,t+1),r.a.createElement(Te.a.Cell,null,f()(e.date).utcOffset(0).format("dddd, MMMM DD, YYYY")),r.a.createElement(Te.a.Cell,null,f()(e.date).utcOffset(0).format("hh:mm A")),r.a.createElement(Te.a.Cell,null,e.location),r.a.createElement(Te.a.Cell,null,e.agency),r.a.createElement(Te.a.Cell,null,e.type),r.a.createElement(Te.a.Cell,null,(Math.round(100*e.amount)/1e4).toFixed(2)))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{as:"h2"},"Tap History",r.a.createElement(K.a.Subheader,null,"Some kind of text will go here")),r.a.createElement(Te.a,{celled:!0},r.a.createElement(Te.a.Header,null,r.a.createElement(Te.a.Row,null,r.a.createElement(Te.a.HeaderCell,null,"#"),r.a.createElement(Te.a.HeaderCell,null,"Date"),r.a.createElement(Te.a.HeaderCell,null,"Time"),r.a.createElement(Te.a.HeaderCell,null,"Location"),r.a.createElement(Te.a.HeaderCell,null,"Agency"),r.a.createElement(Te.a.HeaderCell,null,"Type"),r.a.createElement(Te.a.HeaderCell,null,"Amount"))),r.a.createElement(Te.a.Body,null,o)))}je.defaultProps={};var Fe=a(523),Pe=a(421),Ne=["#3F69AA","#006E6D","#E8B5CE","#FFD662","#8D9440","#C62168","#6B5B95","#FE840E","#BFD641","#6F9FD8"];var Se=function(e){var t=e.data,a=e.error,n=e.loading,o=[],l="";return n?r.a.createElement("div",null,"Loading..."):(n||a||(o=function(e){var t={};return e.forEach(function(e){if("0"!==e.location)if(t[e.location]){var a=Date.parse(t[e.location].lastVisited),n=e.date;t[e.location].count+=1,t[e.location].amount+=e.amount,t[e.location].transfers+="Transfer"===e.type?1:0,t[e.location].fares+="Fare Payment"===e.type||"Transit Pass Payment"===e.type?1:0,Date.parse(e.date)>a&&(t[e.location].lastVisited=n)}else t[e.location]={count:1,amount:e.amount,lastVisited:e.date,transfers:"Transfer"===e.type?1:0,fares:"Fare Payment"===e.type||"Transit Pass Payment"===e.type?1:0}}),Object.keys(t).map(function(a){return Object(Fe.a)({location:a,percent:Math.round(t[a].count/e.length*100)},t[a])}).filter(function(e){return e.count>1}).sort(function(e,t){return e.count>t.count?-1:1}).slice(0,10)}(t.data.transactions),l=0===t.data.transactions.length?"No Transactions For This Period":"".concat(f()(t.data.transactions[0].date).format("MMMM DD YYYY")," - ").concat(f()(t.data.transactions[t.data.transactions.length-1].date).format("MMMM DD YYYY")),console.log(o)),r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{horizontal:!0},r.a.createElement(K.a,{as:"h3"},"Most Active Locations",r.a.createElement(K.a.Subheader,null,l))),r.a.createElement(H.k,{width:"100%",height:400},r.a.createElement(H.i,null,r.a.createElement(H.h,{data:o,fill:"#8884d8",dataKey:"count"},o.map(function(e,t){return r.a.createElement(H.d,{key:"cell-".concat(e.id),fill:Ne[t]})})),r.a.createElement(H.e,{iconType:"circle",verticalAlign:"bottom",payload:o.map(function(e,t){return{value:e.location,type:"circle",id:e.id,color:Ne[t]}})}),r.a.createElement(H.l,null)))))};Se.defaultProps={};var Ie=Se,Ye=a(34),De=a.n(Ye),Ae=a(52),Le=a(1),Be=a.n(Le),Re=a(417);a(814);function ze(){return(ze=Object(Ae.a)(De.a.mark(function e(t,a,n){var r,o,l,c,i,s=arguments;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:{},o="".concat(T.root),l=Object.assign({},r.headers||{},{"Content-Type":"application/json; charset=UTF-8"}),e.next=5,t("".concat(o).concat(a),Object.assign({method:n,credentials:"include"},r,{headers:l,body:JSON.stringify(r.body)}));case 5:return c=e.sent,e.next=8,c.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var We,Ue=(We=fetch,function(e,t,a){return function(e,t,a){return ze.apply(this,arguments)}(We,e,t,a)});function Ke(){return(Ke=Object(Ae.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T.logout.endpoint,T.logout.method);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ge(){return(Ge=Object(Ae.a)(De.a.mark(function e(t,a,n){var r;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T.prestoLogin.endpoint,T.prestoLogin.method,{body:{username:a,password:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(){return(He=Object(Ae.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T.prestoCheckLogin.endpoint,T.prestoCheckLogin.method);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qe(){return(qe=Object(Ae.a)(De.a.mark(function e(t,a){var n;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T.updateBudget.endpoint,T.updateBudget.method,{body:a});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(){return($e=Object(Ae.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(T.currentUser.endpoint,T.currentUser.method);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Je,Ve=function(e){return $e.apply(this,arguments)},Xe=(Je=Ue,{logout:function(){return function(e){return Ke.apply(this,arguments)}(Je)},prestoLogin:function(e,t){return function(e,t,a){return Ge.apply(this,arguments)}(Je,e,t)},prestoIsLoggedIn:function(){return function(e){return He.apply(this,arguments)}(Je)},updateBudget:function(e){return function(e,t){return qe.apply(this,arguments)}(Je,e)},me:function(){return Ve(Je)}}),_e=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:a.props.user.firstName,lastName:a.props.user.lastName,email:a.props.user.email,monthlyPassCost:a.props.budget.monthlyPassCost,fareCost:a.props.budget.fareCost},a.handleFieldChange=function(e){var t=e.target,n=t.name,r=t.value;console.log(n,r),a.setState(Object(y.a)({},n,r))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.email,o=e.monthlyPassCost,l=e.fareCost,c=this.props,i=c.open,s=c.close;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:i},r.a.createElement(K.a,{icon:"setting",content:"Account Settings"}),r.a.createElement(O.a.Content,null,r.a.createElement(K.a,{as:"h3",attached:"top"},r.a.createElement(C.a,{name:"user"}),"Personal Information"),r.a.createElement(z.a,{attached:!0,piled:!0},r.a.createElement(Re.a,null,r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"firstName"},"First Name",r.a.createElement("input",{id:"firstName",placeholder:"First Name",value:t,name:"firstName",onChange:this.handleFieldChange}))),r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"lastName"},"Last Name",r.a.createElement("input",{id:"lastName",placeholder:"Last Name",value:a,name:"lastName",onChange:this.handleFieldChange})))),r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("input",{id:"email",placeholder:"Email",value:n,name:"email",onChange:this.handleFieldChange}))),r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("input",{id:"password",placeholder:"Password",onChange:this.handleFieldChange})))))),r.a.createElement(K.a,{as:"h3",attached:"top"},r.a.createElement(C.a,{name:"bus"}),"Transit Costs"),r.a.createElement(z.a,{attached:!0,piled:!0},r.a.createElement(Re.a,null,r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"monthlyPassCost"},"Monthly Pass Cost",r.a.createElement("input",{type:"number",id:"monthlyPassCost",placeholder:"Monthly Pass Cost",value:o,name:"monthlyPassCost",onChange:this.handleFieldChange}))),r.a.createElement(Re.a.Field,null,r.a.createElement("label",{htmlFor:"fareCost"},"Single Fare Cost",r.a.createElement("input",{type:"number",id:"fareCost",placeholder:"Single Fare Cost",value:l,name:"fareCost",onChange:this.handleFieldChange}))))))),r.a.createElement(O.a.Actions,null,r.a.createElement(k.a,{color:"red",onClick:function(){s()}},r.a.createElement(C.a,{name:"remove"})," Cancel"),r.a.createElement(k.a,{color:"green",onClick:Object(Ae.a)(De.a.mark(function e(){var t;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.updateBudget({monthlyPassCost:o,fareCost:l});case 2:t=e.sent,console.log(t),s();case 5:case"end":return e.stop()}},e)}))},r.a.createElement(C.a,{name:"checkmark"})," Save"))))}}]),t}(n.Component);_e.defaultProps={budget:Be.a.shape({monthlyPassCost:"146.25",fareCost:"3.00"})};var Qe=_e,Ze=function(e){var t=e.header,a=e.body,n=e.footer;return r.a.createElement(E.a,{columns:1,style:{marginTop:"0"}},r.a.createElement(E.a.Row,{verticalAlign:"center",columns:1},r.a.createElement(E.a.Column,{style:{textAlign:"right",lineHeight:"1.2"}},r.a.createElement(E.a.Row,null,r.a.createElement("div",{style:{fontSize:"1rem",fontWeight:"300"}},t)),r.a.createElement(E.a.Row,null,r.a.createElement("div",{style:{width:"100%",fontWeight:"600",fontSize:"1.3rem"}},a)),r.a.createElement(E.a.Row,null,r.a.createElement("div",{style:{fontSize:".9rem",fontWeight:"200",color:"#ababab"}},n)))))},et=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",inProgress:!1,progressMessage:"Fetching Data from Presto...",cards:[]},a.handleTextEntry=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,o=t.cards,l=t.inProgress,c=t.progressMessage,i=this.props,s=i.incrementSteps,u=i.update,m=i.closeModal;return o&&console.log(o.map(function(e){return e.cardNumber})),r.a.createElement(x.a,{manual:!0,url:"".concat(T.root).concat(T.prestoUsage),options:T.send({from:"01/01/2018",cards:o.map(function(e){return e.cardNumber})})},function(t){var o=t.fetch,i=t.data,d=(t.error,t.loading);console.log(i),!d&&i&&(e.setState({inProgress:!1,progressMessage:"Complete!"}),u?m():s());return r.a.createElement("div",null,d||l?r.a.createElement(W.a,{attached:!0,icon:!0},r.a.createElement(C.a,{name:"circle notched",loading:!0}),r.a.createElement(W.a.Content,null,r.a.createElement(W.a.Header,null,"One moment"),c)):r.a.createElement(W.a,{attached:!0,header:"Sign in to Presto",content:"Enter your username and password to gather your presto data"}),r.a.createElement(Re.a,{className:"attached fluid segment"},r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Input,{fluid:!0,placeholder:"Username",label:"Username",disabled:d||l,type:"text",name:"username",onChange:e.handleTextEntry,value:a}),r.a.createElement(Re.a.Input,{fluid:!0,placeholder:"Password",label:"Password",disabled:d||l,type:"password",name:"password",onChange:e.handleTextEntry,value:n})),r.a.createElement("div",null,r.a.createElement(k.a,{positive:!0,labelPosition:"right",icon:"chevron circle right",content:"Next",disabled:d||l||!a||!n,onClick:Object(Ae.a)(De.a.mark(function t(){var r,l;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({inProgress:!0,progressMessage:"Logging into PRESTO..."}),t.next=3,Xe.prestoIsLoggedIn();case 3:if(r=t.sent,console.log(r),"error"!==r.status||"Not logged in to Presto"!==r.message){t.next=14;break}return e.setState({inProgress:!0,progressMessage:"Getting account data..."}),t.next=9,Xe.prestoLogin(a,n);case 9:l=t.sent,console.log(l),l.cards&&(e.setState({cards:l.cards,inProgress:!0,progressMessage:"Fetching PRESTO usage data..."}),o()),t.next=15;break;case 14:r.status;case 15:case"end":return t.stop()}},t)}))},r.a.createElement(C.a,{name:"checkmark"}),"".concat(u?l&&"Complete!"===c?" Close":" Update":" Next")),u&&r.a.createElement(k.a,{negative:!0,content:"Cancel",disabled:l,onClick:function(){m()}}," Cancel"))))})}}]),t}(n.Component),tt=function(e){var t=e.open,a=e.close;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:t,size:"tiny"},r.a.createElement(et,{update:!0,closeModal:a})))},at=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeSelection:"this month",accountModalOpen:!1,prestoModalOpen:!1},a.handleItemClick=function(){var e=Object(Ae.a)(De.a.mark(function e(t,n){var r;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("update"===(r=n.name)&&a.setState({prestoModalOpen:!0}),"logout"!==r){e.next=6;break}return e.next=5,Xe.logout();case 5:a.props.history.push("/login");case 6:"settings"===r&&a.setState({accountModalOpen:!0});case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleAccountModalClose=function(){a.setState({accountModalOpen:!1})},a.handlePrestoModalClose=function(){a.setState({prestoModalOpen:!1})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.firstName,e.lastName,e.cards),a=e.balance,n=e.budget,o=e.lastActivity,l=e.amount,c=e.since,i=this.state,s=(i.activeItem,i.accountModalOpen),u=i.prestoModalOpen;return r.a.createElement("div",{style:{background:"white"}},r.a.createElement(w.a,{icon:!0,secondary:!0,borderless:!0},r.a.createElement(w.a.Item,{header:!0}),r.a.createElement(w.a.Menu,{position:"right"},r.a.createElement(w.a.Item,{name:"update",onClick:this.handleItemClick},r.a.createElement(C.a,{name:"refresh",size:"large"})),r.a.createElement(w.a.Item,{name:"settings",onClick:this.handleItemClick},r.a.createElement(C.a,{name:"setting",size:"large"})),r.a.createElement(w.a.Item,{name:"logout",onClick:this.handleItemClick},r.a.createElement(C.a,{name:"log out",size:"large"})))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"}},r.a.createElement(Ze,{header:"Balance",body:"$".concat((Math.round(100*a)/100).toFixed(2)),footer:"over ".concat(t.length," card").concat(1!==t.length?"s":"")}),r.a.createElement(Ze,{header:"Spent",body:"$".concat(Math.round(l/100)),footer:"since ".concat(f()(c).format("MMM YYYY"))}),r.a.createElement(Ze,{header:"Last Charge",body:"$".concat(parseFloat(o.amount/100).toFixed(2)),footer:"".concat(f()(o.date).fromNow())}),r.a.createElement(Ze,{header:"Location",body:o.location,footer:"".concat(f()(o.date).fromNow())}),r.a.createElement(Ze,{header:"Updated",body:f()(o.updated_at).fromNow()})),r.a.createElement(tt,{open:u,close:this.handlePrestoModalClose}),r.a.createElement(Qe,{open:s,user:this.props,budget:n||{},close:this.handleAccountModalClose}))}}]),t}(r.a.Component);at.defaultProps={};var nt=Object(i.e)(at),rt=a(420);function ot(){var e=Object(U.a)(["\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 40px;\n  z-index: 11;\n"]);return ot=function(){return e},e}var lt=G.a.div(ot()),ct=function(e){return r.a.createElement(lt,null,e.children)};function it(){var e=Object(U.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding-top: 10px;\n  background: #74c35a;\n"]);return it=function(){return e},e}function st(){var e=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n"]);return st=function(){return e},e}var ut=G.a.div(st()),mt=G.a.div(it()),dt=function(e){return r.a.createElement(mt,null,r.a.createElement("div",{style:{position:"relative",maxHeight:"60px"}},r.a.createElement(ct,null,r.a.createElement(xt,{justify:"space-around",align:"center",padding:"0 0 0 10px"},r.a.createElement(K.a,{style:{width:"100%",marginBottom:"0"},as:"h1"},"Presto Analytics"),r.a.createElement(xt,{justify:"flex-end",padding:"0 10px 0 0"},r.a.createElement(k.a,{inverted:!0,icon:!0,labelPosition:"left"},"Log In",r.a.createElement(C.a,{name:"sign in"})),r.a.createElement(k.a,{inverted:!0,icon:!0,labelPosition:"left"},"Sign Up",r.a.createElement(C.a,{name:"at"})))))),r.a.createElement(ut,null,e.children))},pt=a(342),ht=a(423),ft=function(e){return r.a.createElement(x.a,{url:"".concat(T.root).concat(T.currentUser.endpoint),options:T.send(T.currentUser.method)},function(t){return t.loading?r.a.createElement(pt.a,{active:!0},r.a.createElement(ht.a,null)):e.children(t)})},gt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).saveToState=function(t){e.setState(Object(y.a)({},t.target.name,t.target.value))},e.state={email:"",password:""},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password;return r.a.createElement(bt.Consumer,null,function(t){return r.a.createElement(x.a,{manual:!0,url:"".concat(T.root).concat(T.login),options:T.send({email:a,password:n})},function(o){var l=o.fetch,s=o.data,u=o.loading,m=o.error;return s&&"success"===s.status||t.data&&t.data.user?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement("div",null,m&&r.a.createElement(W.a,{error:!0},r.a.createElement(W.a.Header,null,"An error occured"),m.message),r.a.createElement("div",{style:{minWidth:"35%"}},r.a.createElement(W.a,{attached:!0,header:"Log in",content:"Enter your email address and password to log in to your account"}),r.a.createElement(Re.a,{className:"attached fluid segment"},r.a.createElement(Re.a.Input,{fluid:!0,iconPosition:"left",placeholder:"Email"},r.a.createElement(C.a,{name:"at"}),r.a.createElement("input",{disabled:u,type:"text",name:"email",onChange:e.saveToState,value:a})),r.a.createElement(Re.a.Input,{fluid:!0,iconPosition:"left",placeholder:"Password"},r.a.createElement(C.a,{name:"key"}),r.a.createElement("input",{disabled:u,type:"password",name:"password",onChange:e.saveToState,value:n})),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(k.a,{style:{marginRight:0},positive:!0,labelPosition:"right",icon:"chevron circle right",content:"Login",disabled:u||!a.length||!n.length,loading:u,onClick:function(){l(),e.setState({email:"",password:""})}}))),r.a.createElement(W.a,{attached:"bottom",warning:!0},r.a.createElement(C.a,{name:"help"}),"Don't have an account?",r.a.createElement(c.b,{to:"/register"}," Register"),"\xa0instead.")))})})}}]),t}(n.Component);function Et(){var e=Object(U.a)(["\n  display: flex;\n  position: relative;\n  flex-wrap: nowrap;\n  width: ",";\n  flex-direction: row;\n  align-items: ",";\n  justify-content: ",";\n  padding: ",";\n"]);return Et=function(){return e},e}function vt(){var e=Object(U.a)(["\n  border-radius: 0.7em;\n  margin-left: 30px;\n  min-height: 400px;\n  margin-right: 15px;\n  /* border: 1px solid lightgrey; */\n  /* background: white; */\n  margin-top: 10px;\n  box-shadow: 0 1px 6px rgba(32, 33, 36, 0.28);\n  padding: 10px;\n"]);return vt=function(){return e},e}function yt(){var e=Object(U.a)(["\n  position: relative;\n  width: 100%;\n  color: white;\n  z-index: 1;\n"]);return yt=function(){return e},e}var bt=r.a.createContext(),xt=(G.a.div(yt()),G.a.main(vt()),G.a.div(Et(),function(e){return e.width||"100%"},function(e){return e.align||"stretch"},function(e){return e.justify||"stretch"},function(e){return e.padding||"0"})),wt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={menuValue:"",updatePrestoOpen:!1,accountSettingsOpen:!1,redirect:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.loginRequired,n=this.state;n.menuValue,n.accountSettingsOpen;return r.a.createElement(ft,null,function(e){var n=e.data,o=e.error,l=e.loading;return!l&&o&&a?r.a.createElement(rt.a,null,r.a.createElement(dt,null,o&&r.a.createElement(W.a,{error:!0},o.message),r.a.createElement(bt.Provider,{value:{data:n,error:o}},r.a.createElement(gt,null)))):l||!o||a?!l&&n&&"success"===n.status?r.a.createElement(r.a.Fragment,null,r.a.createElement(bt.Provider,{value:{data:n.data}},t)):void 0:r.a.createElement(rt.a,null,r.a.createElement(dt,null,r.a.createElement(bt.Provider,{value:{data:n,error:o}},t)))})}}]),t}(n.Component),Ct=function(e){console.log(e);var t=e.dataset;return r.a.createElement("div",null,r.a.createElement(xt,{justify:"space-between",align:"center"},r.a.createElement("h3",{style:{marginTop:"0",marginBottom:"0",marginLeft:"25px",color:"#11BB81"}},"Year to Month"),r.a.createElement("h3",{style:{marginTop:"0",marginRight:"30px",color:"#3BB4E9"}},"$".concat((t.totalAmount/100).toFixed(2)," Total"))),r.a.createElement(H.k,{height:200},r.a.createElement(H.g,{margin:{top:20,right:30,left:0,bottom:0},data:t.data},r.a.createElement(H.c,{stroke:"#EBEBEB",vertical:!1}),r.a.createElement(H.f,{dataKey:"paymentTaps",type:"monotone",stroke:"#3333cc",strokeWidth:5,dot:{stroke:"white",strokeWidth:3,fill:"#3333cc",r:7}}),r.a.createElement(H.f,{dataKey:"transferTaps",type:"monotone",stroke:"#11BB81",strokeWidth:5,dot:{stroke:"white",strokeWidth:3,fill:"#11BB81",r:7}}),r.a.createElement(H.f,{dataKey:"amount",type:"monotone",stroke:"#3BB4E9",strokeWidth:5,dot:{stroke:"white",strokeWidth:3,fill:"#3BB4E9",r:7}}),r.a.createElement(H.n,{type:"number",tickMargin:20,dataKey:"amount",tickLine:!1,axisLine:!1,stroke:"#C4C4C4"}),r.a.createElement(H.m,{dataKey:"date",tickMargin:5,tickLine:!1,axisLine:!1,stroke:"#C4C4C4"}),r.a.createElement(H.j,{y:t.monthlyPassCost?parseFloat(t.monthlyPassCost/100).toFixed(2):null,label:"Transit Pass Cost",stroke:"red"}),r.a.createElement(H.j,{y:(parseFloat(t.monthlyPassCost)/parseFloat(t.fareCost)/100).toFixed(2),label:"Transit Pass Break-even",stroke:"red"}),r.a.createElement(H.l,null))))},Ot=function(e){var t=e.dataset,a=e.budget;return t.data.forEach(function(e){var t=0;a&&(t=a.monthlyPassCost),e.costPerTapIfPass=(parseFloat(t)/(e.paymentTaps+e.transferTaps)).toFixed(2)}),console.log(t),r.a.createElement("div",null,r.a.createElement(xt,{justify:"space-between",align:"center"},r.a.createElement("h3",{style:{marginTop:"0",marginBottom:"0",marginLeft:"25px",color:"#11BB81"}},"Cost Per Tap"),r.a.createElement("h3",{style:{marginTop:"0",marginRight:"30px",color:"#3BB4E9"}},"$".concat(t.costPerTap.toFixed(2)," / Tap"))),r.a.createElement(H.k,{height:200},r.a.createElement(H.g,{margin:{top:20,right:30,left:0,bottom:0},data:t.data},r.a.createElement(H.c,{stroke:"#EBEBEB",vertical:!1}),r.a.createElement(H.f,{dataKey:"costPerTap",type:"monotone",stroke:"#3BB4E9",strokeWidth:5,dot:{stroke:"white",strokeWidth:3,fill:"#3BB4E9",r:7}}),t.data[0]&&t.data[0].costPerTapIfPass>0&&r.a.createElement(H.f,{dataKey:"costPerTapIfPass",type:"monotone",stroke:"#3333cc",strokeWidth:5,dot:{stroke:"white",strokeWidth:3,fill:"#3333cc",r:7}}),r.a.createElement(H.n,{type:"number",tickMargin:20,dataKey:"costPerTap",tickLine:!1,axisLine:!1,stroke:"#C4C4C4"}),r.a.createElement(H.m,{dataKey:"date",tickMargin:5,tickLine:!1,axisLine:!1,stroke:"#C4C4C4"}),r.a.createElement(H.l,null))))},kt=function(e){var t=e.dataset,a=t.data.length;return r.a.createElement("div",null,r.a.createElement(xt,{justify:"space-between",align:"center"},r.a.createElement("h3",{style:{marginTop:"0",marginBottom:"0",marginLeft:"25px",color:"#11BB81"}},"Tap Overview"),r.a.createElement("h3",{style:{marginTop:"0",marginRight:"30px",color:"#3BB4E9"}},"".concat(t.totalTaps," Taps Total"))),r.a.createElement(H.k,{height:200},r.a.createElement(H.b,{margin:{top:20,right:30,left:0,bottom:0},data:t.data},r.a.createElement(H.c,{stroke:"#EBEBEB",vertical:!1}),r.a.createElement(H.l,null),r.a.createElement(H.a,{stackId:"a",dataKey:"paymentTaps",fill:"#3333cc"}),r.a.createElement(H.a,{stackId:"a",dataKey:"transferTaps",fill:"#3BB4E9"}),r.a.createElement(H.j,{y:t.totalTaps/a,label:"Average Monthly Taps",stroke:"red"}),r.a.createElement(H.n,{allowDecimals:!1,type:"number",dataKey:"paymentTaps",tickLine:!1,axisLine:!1}),r.a.createElement(H.m,{dataKey:"date",tickLine:!1,axisLine:!1}))))};n.Component;var Mt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).contextRef=Object(n.createRef)(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.props.data,t=e.user,a=e.balance,n=e.budget,o=e.lastActivity,l=e.spent,c=l.amount,s=l.since;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{innerRef:this.contextRef},r.a.createElement(E.a,{columns:"equal"},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(v.a,{context:this.contextRef},r.a.createElement(nt,{firstName:t.firstName,lastName:t.lastName,cards:t.cards,balance:a,budget:n,amount:s?c:"N/A",since:s||"Never",lastActivity:0===o.length?{amount:"Never",location:"N/A",date:"Never"}:o[0]})))),r.a.createElement(E.a.Row,{style:{marginTop:"20px"}},r.a.createElement(E.a.Column,null,r.a.createElement(i.b,{path:"/dashboard/:cardNumber/:searchType/:yearOrRange/:monthOrUnit"},function(e){var a,o,l,c,s=e.match,u=e.history;return console.log(s,u),s?(a=s.params.cardNumber,o=s.params.searchType===P||"month"===s.params.searchType?s.params.searchType:"err",l=Math.abs(parseInt(s.params.yearOrRange,10)),c="days"!==s.params.monthOrUnit?Math.abs(parseInt(s.params.monthOrUnit,10)):"days",r.a.createElement(D,{cards:t.cards,history:u,match:s,cardNumber:a,searchType:o,yearOrRange:l,monthOrUnit:c},function(e){var t=e.data,a=e.error,o=e.loading;return console.log(t),r.a.createElement(E.a,{columns:"equal"},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(oe,{data:t,error:a,loading:o,budget:n||{}}))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(R,{data:t,error:a,loading:o}))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(Ie,{data:t,error:a,loading:o})),r.a.createElement(E.a.Column,null)))})):(a="all",o=P,l=30,c="days",r.a.createElement(i.a,{to:"/dashboard/".concat(a,"/").concat(o,"/").concat(l,"/").concat(c)}))}))))))}}]),t}(r.a.Component);function Tt(e){return r.a.createElement(wt,{loginRequired:!0},r.a.createElement(bt.Consumer,null,function(e){return r.a.createElement(Mt,{props:e})}))}Tt.defaultProps={};function jt(e){return r.a.createElement(wt,{loginRequired:!1},r.a.createElement(gt,null))}jt.defaultProps={};var Ft=a(269),Pt=a(278),Nt=a.n(Pt),St=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",email:"",password:"",passwordAgain:""},a.saveToState=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.firstName,n=t.lastName,o=t.email,l=t.password,i=t.passwordAgain,s=this.props.incrementSteps;return r.a.createElement(x.a,{manual:!0,url:"".concat(T.root).concat(T.register),options:T.send({firstName:a,lastName:n,email:o,password:l,passwordAgain:i})},function(t){var u=t.fetch,m=t.loading,d=t.data,p=t.error;d&&(Nt.a.done(),s&&s());return r.a.createElement("div",{style:{minWidth:"50%"}},r.a.createElement(W.a,{attached:!0,header:"Register",content:"Fill out the form below to sign-up for a new account"}),p&&(Nt.a.done(),r.a.createElement("div",null,"ERROR:",p.message)),r.a.createElement(Re.a,{className:"attached fluid segment"},r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Input,{fluid:!0,label:"First Name",type:"text",placeholder:"First Name",value:a,onChange:e.saveToState,name:"firstName",disabled:m}),r.a.createElement(Re.a.Input,{fluid:!0,label:"Last Name",placeholder:"Last Name",type:"text",name:"lastName",onChange:e.saveToState,value:n,disabled:m})),r.a.createElement(Re.a.Input,{fluid:!0,placeholder:"Email",label:"Email",disabled:m,type:"text",name:"email",onChange:e.saveToState,value:o}),r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Input,{fluid:!0,placeholder:"Password",label:"Password",disabled:m,type:"password",name:"password",onChange:e.saveToState,value:l}),r.a.createElement(Re.a.Input,{fluid:!0,placeholder:"Password Again",disabled:m,label:"Password Again",type:"password",name:"passwordAgain",onChange:e.saveToState,value:i})),r.a.createElement(k.a,{positive:!0,labelPosition:"right",icon:"chevron circle right",content:"Next",disabled:m||!a||!n||!o||!l||!i||l!==i,loading:m,onClick:function(){Nt.a.start(),u(),e.setState({firstName:"",lastName:"",email:"",password:"",passwordAgain:""})}})),r.a.createElement(W.a,{attached:"bottom",warning:!0},r.a.createElement(C.a,{name:"help"}),"Already signed up?\xa0",r.a.createElement(c.b,{to:"/login"},"Login"),"\xa0instead."))})}}]),t}(n.Component),It=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeStep:1,completedSteps:0},a.incrementSteps=function(){var e=a.state,t=e.activeStep,n=e.completedSteps;a.setState({activeStep:t+1,completedSteps:n+1})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeStep,a=e.completedSteps;return console.log(a>0,t),r.a.createElement(rt.a,null,r.a.createElement(z.a,{basic:!0,textAlign:"center"},r.a.createElement(Ft.a.Group,{ordered:!0},r.a.createElement(Ft.a,{active:1===t,completed:a>0},r.a.createElement(Ft.a.Content,null,r.a.createElement(Ft.a.Title,null,"Sign Up"),r.a.createElement(Ft.a.Description,null,"Sign up for your account"))),r.a.createElement(Ft.a,{active:2===t,completed:a>1},r.a.createElement(Ft.a.Content,null,r.a.createElement(Ft.a.Title,null,"Presto"),r.a.createElement(Ft.a.Description,null,"Sign in to Presto"))),r.a.createElement(Ft.a,{active:3===t,completed:a>2},r.a.createElement(Ft.a.Content,null,r.a.createElement(Ft.a.Title,null,"Finalize"))))),r.a.createElement(z.a,{basic:!0},1===t&&r.a.createElement(St,{incrementSteps:this.incrementSteps}),2===t&&r.a.createElement(et,{incrementSteps:this.incrementSteps}),3===t&&r.a.createElement("div",null,"ALL DONE")))}}]),t}(n.Component);function Yt(e){return r.a.createElement(wt,null,r.a.createElement(It,null))}Yt.defaultProps={};var Dt=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i.b,{exact:!0,path:"/",component:jt}),r.a.createElement(i.b,{path:"/dashboard",component:Tt}),r.a.createElement(i.b,{path:"/login",component:jt}),r.a.createElement(i.b,{path:"/register",component:Yt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[546,1,2]]]);
//# sourceMappingURL=main.7532adeb.chunk.js.map